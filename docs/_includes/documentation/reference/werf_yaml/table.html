<style>
table {
    font-family: monospace;
}

table tr td:first-child {
    width: 50%;
}

table tr td {
    border: 2px solid #eef2ff;
    vertical-align: top;
    line-height: unset !important;
}

table tr td span {
    font-size: 14px;
}

span.btn {
    cursor: pointer;
}

table tr[class*="collapsed-"] {
    display: none;
}
</style>

<table>
{% for section in site.data.werf_yaml.sections %}
    <tr id="{{ section.id }}" class="{{ section.id }}">
        <td colspan="2">--- # {{ section.description }} <span id="{{ section.id }}-btn" class="btn">{% if section.isCollapsedByDefault %}(+){% else %}(-){% endif %}</span></td>
    </tr>

    {% assign sectionCollapsedClass = "collapsed" | append: "-" | append: section.id %}

    <script>
    $( "#{{ section.id }}-btn" ).click(function() {
        $( this ).text(function(i, oldText) {
            return oldText === '(+)' ? '(-)' : '(+)';
        });

        $( "tr.{{ section.id }}:not(#{{ section.id }})" ).toggleClass("{{ sectionCollapsedClass }}", $( this ).text() === '(+)');
    });
    </script>

    {% for directive in section.directives %}
    {% assign directiveClasses = '' | split: '' %}
    {% assign directiveClasses = directiveClasses | push: section.id %}
    {% assign directiveCollapsedClasses = '' | split: '' %}
    {% if section.isCollapsedByDefault %}
    {% assign directiveCollapsedClasses = directiveCollapsedClasses | push: sectionCollapsedClass %}
    {% endif %}
    {% include documentation/reference/werf_yaml/directive.html directive=directive directiveClasses=directiveClasses directiveCollapsedClasses=directiveCollapsedClasses %}
    {% endfor %}
{% endfor %}
</table>
