---
title: Базовые директивы
sidebar: doc_sidebar
permalink: base_directives.html
folder: directive
---

### Особенности

* В одном Dappfile может быть только один безымянный образ.
* Можно определять несколько образов в одном Dappfile.
* На верхнем уровне могут использоваться только директивы dimg и dimg\_group.
* Часть директив имеют несколько возможных форм записи.

### dimg \<name\>

Определяет образ dimg для сборки.

* Наследуются все настройки родительского контекста.
* Можно дополнять или переопределять настройки родительского контекста.

#### Примеры

##### Собирать образ, не указывая имени
```ruby
dimg do
  docker.from 'image:tag'
end
```

##### Собирать образы X и Y
```ruby
dimg 'X' do
  docker.from 'image1:tag'
end

dimg 'Y' do
  docker.from 'image2:tag'
end
```

### dimg\_group

* При использовании блока создается новый контекст.
  * Можно использовать директиву dimg\_group внутри нового контекста.

#### Примеры

##### Собирать образы X, Y и Z
```ruby
dimg_group do
  docker.from 'image:tag'
  
  dimg 'X'
  
  dimg_group do
    dimg 'Y'
  
    dimg_group do
      dimg 'Z'
    end
  end
end
```

### install\_depends\_on \<glob\>[,\<glob\>, \<glob\>, ...]
Список файлов зависимостей для стадии install.

* При изменении содержимого указанных файлов, произойдет пересборка стадии install.
* Учитывается лишь содержимое файлов и порядок в котором они указаны (имена файлов не учитываются).
* Поддерживаются glob-паттерны.
* Пути в \<glob\> указываются относительно [директории проекта](definitions.html#директория-проекта).
* Директории игнорируются.
* \<glob\> чувствителен к регистру.

### setup\_depends\_on \<glob\>[,\<glob\>, \<glob\>, ...]
Список файлов зависимостей для стадии setup.

* При изменении содержимого указанных файлов, произойдет пересборка стадии setup.
* Учитывается лишь содержимое файлов и порядок в котором они указаны (имена файлов не учитываются).
* Поддерживаются glob-паттерны.
* Пути в \<glob\> указываются относительно [директории проекта](definitions.html#директория-проекта).
* Директории игнорируются.
* \<glob\> чувствителен к регистру.
